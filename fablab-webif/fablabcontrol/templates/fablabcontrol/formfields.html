{% load i18n widget_tweaks %}

{% for field in form %}
    {% if field.errors %}
        <div class="form-group has-error">
            <label class="col-sm-2 control-label" for="id_{{ field.name }}">{{ field.label }}</label>
            <div class="col-sm-8 col-lg-6">
                {% with "placeholder:"|add:field.label|title as placeholder %}
                {{ field|attr:"class:form-control"|attr:placeholder }}
                {% endwith %}
                <span class="help-block">
                    {% for error in  field.errors %}{{ error }}{% endfor %}
                </span>
            </div>
        </div>
    {% else %}
        <div class="form-group">
            <label class="col-sm-2 control-label" for="id_{{ field.name }}">{{ field.label }}</label>
            <div class="col-sm-8 col-lg-6">
                {% with "placeholder:"|add:field.label|title as placeholder %}
                {{ field|attr:"class:form-control"|attr:placeholder }}
                {% endwith %}
                {% if field.help_text %}
                    <p class="help-block"><small>{{ field.help_text }}</small></p>
                {% endif %}
            </div>
        </div>
    {% endif %}
{% endfor %}